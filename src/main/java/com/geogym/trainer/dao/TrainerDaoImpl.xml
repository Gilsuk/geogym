<?xml version="1.0" encoding="UTF-8"?>

<!-- 마이바티스 3 mapper DOCTYPE -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.geogym.trainer.dao.TrainerDao">

	<select id="getPtTicketToUser" parameterType="com.geogym.trainer.dto.PtTicket" resultType="com.geogym.trainer.dto.Trainer">
		SELECT * FROM trainer where trainer_no = #{trainer_no}
	</select>
	<select id="getPtUserToTrainer" parameterType="com.geogym.trainer.dto.Trainer" resultType="com.geogym.user.dto.User">
		SELECT u.user_no, u.user_name, u.user_gender, u.user_birth, u.user_tel, u.user_id, 	u.user_pw, u.user_email  FROM user u, pt_ticket t  where trainer_no = #{trainer_no} and pt_ticket_amount > 0 and t.user_no = u.user_no
	</select>
	<update id="updateTrainer" parameterType="com.geogym.trainer.dto.Trainer">
		update trainer set trainer_address = #{trainer_address}, trainer_price = #{trainer_price}, trainer_profile = #{trainer_profile}, attachment_no = #{attachment_no} where trainer_no = #{trainer_no}
	</update>
	<select id="viewTrainerList" resultType="com.geogym.trainer.dto.Trainer">
		SELECT * FROM trainer order by trainer_no DESC
	</select>
	<select id="getTrainer" parameterType="com.geogym.trainer.dto.Trainer" resultType="com.geogym.trainer.dto.Trainer">
		SELECT * FROM trainer where trainer_no = #{trainer_no}
	</select>
	<select id="getReputation" parameterType="com.geogym.trainer.dto.Trainer" resultType="int">
		SELECT count(*) FROM trainer_reputation where trainer_no = #{trainer_no}
	</select>

</mapper>